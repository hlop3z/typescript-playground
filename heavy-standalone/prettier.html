<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prettier Demo</title>

    <!-- Load Prettier standalone and plugin 
    <script src="https://unpkg.com/prettier@2.7.1/standalone.js"></script>
    <script src="./__budles__/prettier.min.js"></script>
     -->
    <script src="./__budles__/webcode.min.js"></script>

    <style>
      * {
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        margin: 0;
        padding: 20px;
        background: #1e1e1e;
        color: #d4d4d4;
        min-height: 100vh;
      }

      h1 {
        color: #569cd6;
        margin-bottom: 10px;
      }

      .subtitle {
        color: #808080;
        margin-bottom: 20px;
      }

      .container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        max-width: 1400px;
        margin: 0 auto;
      }

      .panel {
        display: flex;
        flex-direction: column;
      }

      .panel-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }

      label {
        font-weight: 600;
        color: #9cdcfe;
      }

      textarea {
        width: 100%;
        height: 400px;
        padding: 15px;
        font-family: "Consolas", "Monaco", monospace;
        font-size: 14px;
        background: #252526;
        color: #d4d4d4;
        border: 1px solid #3c3c3c;
        border-radius: 4px;
        resize: vertical;
        tab-size: 2;
      }

      textarea:focus {
        outline: none;
        border-color: #569cd6;
      }

      .controls {
        display: flex;
        gap: 15px;
        align-items: center;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }

      button {
        padding: 10px 20px;
        font-size: 14px;
        font-weight: 600;
        background: #0e639c;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background 0.2s;
      }

      button:hover {
        background: #1177bb;
      }

      button:active {
        background: #0d5a8c;
      }

      select,
      input[type="number"] {
        padding: 8px 12px;
        font-size: 14px;
        background: #3c3c3c;
        color: #d4d4d4;
        border: 1px solid #555;
        border-radius: 4px;
      }

      select:focus,
      input:focus {
        outline: none;
        border-color: #569cd6;
      }

      .option-group {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .option-group label {
        font-weight: normal;
        color: #d4d4d4;
      }

      .status {
        padding: 10px;
        border-radius: 4px;
        margin-top: 10px;
        font-size: 13px;
      }

      .status.success {
        background: #2d4a3e;
        color: #4ec9b0;
      }

      .status.error {
        background: #4a2d2d;
        color: #f48771;
      }

      .info {
        background: #2d3a4a;
        padding: 15px;
        border-radius: 4px;
        margin-bottom: 20px;
        font-size: 13px;
        color: #9cdcfe;
      }

      .info code {
        background: #1e1e1e;
        padding: 2px 6px;
        border-radius: 3px;
      }
    </style>
  </head>

  <body>
    <h1>Prettier Demo</h1>
    <p class="subtitle">
      Format JavaScript, TypeScript, JSX, and more with Prettier
    </p>

    <div class="info">
      Using <code>prettier.min.js</code> bundle with Babel parser plugin.
      Prettier is loaded from <code>./__budles__/prettier.min.js</code>
    </div>

    <div class="controls">
      <button id="format-btn">Format Code</button>

      <div class="option-group">
        <label for="parser">Parser:</label>
        <select id="parser">
          <option value="babel">Babel (JS/JSX)</option>
          <option value="babel-ts">Babel TypeScript</option>
        </select>
      </div>

      <div class="option-group">
        <label for="tab-width">Tab Width:</label>
        <input
          type="number"
          id="tab-width"
          value="2"
          min="1"
          max="8"
          style="width: 60px"
        />
      </div>

      <div class="option-group">
        <label for="print-width">Print Width:</label>
        <input
          type="number"
          id="print-width"
          value="80"
          min="40"
          max="200"
          style="width: 70px"
        />
      </div>

      <div class="option-group">
        <input type="checkbox" id="use-tabs" />
        <label for="use-tabs">Use Tabs</label>
      </div>

      <div class="option-group">
        <input type="checkbox" id="semi" checked />
        <label for="semi">Semicolons</label>
      </div>

      <div class="option-group">
        <input type="checkbox" id="single-quote" />
        <label for="single-quote">Single Quotes</label>
      </div>
    </div>

    <div class="container">
      <div class="panel">
        <div class="panel-header">
          <label for="input">Input Code</label>
        </div>
        <textarea id="input" spellcheck="false">
// Messy, unformatted code
const greet=(name,age)=>{if(age>=18){return `Hello ${name}, you are an adult!`}else{return `Hi ${name}, you are ${age} years old`}}

function calculateSum(numbers){let total=0;for(let i=0;i<numbers.length;i++){total+=numbers[i]}return total}

const users=[{name:"Alice",age:25,email:"alice@example.com"},{name:"Bob",age:17,email:"bob@example.com"},{name:"Charlie",age:30,email:"charlie@example.com"}]

const filteredUsers=users.filter(user=>user.age>=18).map(user=>({...user,isAdult:true})).sort((a,b)=>a.name.localeCompare(b.name))

class MyComponent extends React.Component{constructor(props){super(props);this.state={count:0}}render(){return(<div className="container"><h1>Count: {this.state.count}</h1><button onClick={()=>this.setState({count:this.state.count+1})}>Increment</button></div>)}}</textarea
        >
      </div>

      <div class="panel">
        <div class="panel-header">
          <label for="output">Formatted Output</label>
        </div>
        <textarea id="output" readonly spellcheck="false"></textarea>
        <div id="status" class="status" style="display: none"></div>
      </div>
    </div>

    <script>
      const inputEl = document.getElementById("input");
      const outputEl = document.getElementById("output");
      const statusEl = document.getElementById("status");
      const formatBtn = document.getElementById("format-btn");

      function getOptions() {
        return {
          parser: document.getElementById("parser").value,
          tabWidth: parseInt(document.getElementById("tab-width").value, 10),
          printWidth: parseInt(
            document.getElementById("print-width").value,
            10
          ),
          useTabs: document.getElementById("use-tabs").checked,
          semi: document.getElementById("semi").checked,
          singleQuote: document.getElementById("single-quote").checked,
          plugins: [prettierPlugins.babel],
        };
      }

      function showStatus(message, isError = false) {
        statusEl.textContent = message;
        statusEl.className = "status " + (isError ? "error" : "success");
        statusEl.style.display = "block";
      }

      async function formatCode() {
        const code = inputEl.value;
        const options = getOptions();

        try {
          const startTime = performance.now();
          const formatted = await prettier.format(code, options);
          const endTime = performance.now();

          outputEl.value = formatted;
          showStatus(
            `Formatted successfully in ${(endTime - startTime).toFixed(2)}ms`
          );
        } catch (error) {
          outputEl.value = "";
          showStatus(`Error: ${error.message}`, true);
        }
      }

      formatBtn.addEventListener("click", formatCode);

      // Format on Ctrl+Enter
      inputEl.addEventListener("keydown", (e) => {
        if (e.ctrlKey && e.key === "Enter") {
          e.preventDefault();
          formatCode();
        }
      });

      // Initial format
      formatCode();
    </script>
  </body>
</html>
